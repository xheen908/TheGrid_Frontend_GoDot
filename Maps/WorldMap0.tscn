[gd_scene load_steps=15 format=3 uid="uid://cd8gb2nj03epb"]

[ext_resource type="Shader" uid="uid://d1tread0pc742" path="res://Maps/tron_grid.gdshader" id="1_shader"]
[ext_resource type="PackedScene" uid="uid://bpd57r06uwyx5" path="res://Maps/Portal.tscn" id="2_portal"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wall"]
render_priority = 0
shader = ExtResource("1_shader")
shader_parameter/background_color = Color(0, 0.05, 0.1, 1)
shader_parameter/line_color = Color(0, 0.8, 1, 1)
shader_parameter/grid_size = 3.0
shader_parameter/line_width = 1.1
shader_parameter/glow_strength = 4.5

[sub_resource type="PlaneMesh" id="PlaneMesh_floor"]
size = Vector2(250, 250)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_floor"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_night"]
sky_top_color = Color(0.02, 0.02, 0.05, 1)
sky_horizon_color = Color(0.1, 0.1, 0.2, 1)
ground_bottom_color = Color(0, 0, 0, 1)
ground_horizon_color = Color(0.1, 0.1, 0.2, 1)

[sub_resource type="Sky" id="Sky_night"]
sky_material = SubResource("ProceduralSkyMaterial_night")

[sub_resource type="Environment" id="Environment_night"]
background_mode = 2
sky = SubResource("Sky_night")
ambient_light_source = 3
ambient_light_color = Color(0.05, 0.05, 0.1, 1)
tonemap_mode = 2
glow_enabled = true
glow_intensity = 1.0
fog_enabled = true
fog_light_color = Color(0.05, 0.05, 0.1, 1)
fog_sky_affect = 0.5

[sub_resource type="BoxMesh" id="BoxMesh_wall_large"]
size = Vector3(31, 8, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_wall_large"]
size = Vector3(31, 8, 2)

[sub_resource type="BoxMesh" id="BoxMesh_corridor_wall"]
size = Vector3(30, 8, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_corridor_wall"]
size = Vector3(30, 8, 2)

[sub_resource type="BoxMesh" id="BoxMesh_room_wall"]
size = Vector3(12, 8, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_room_wall"]
size = Vector3(12, 8, 2)

[node name="WorldMap0" type="Node3D"]

[node name="Environment" type="Node3D" parent="."]

[node name="Floor" type="MeshInstance3D" parent="Environment"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("PlaneMesh_floor")

[node name="StaticBody3D" type="StaticBody3D" parent="Environment/Floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Floor/StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_floor")

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_night")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 20, 0)
light_color = Color(0.8, 0.9, 1, 1)
light_energy = 0.5
shadow_enabled = true

[node name="Architecture" type="Node3D" parent="."]

[node name="Wall1_N" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, 29.449291)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall1_N"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall1_N"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall3_E" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 29.141357, 4, 0)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall3_E"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall3_E"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 4, -29.531864)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S2" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.935, 0, -2.2498375e-06, 0, 0.2, 0, 1.4118108e-07, 0, -14.9, 0.49, 0.65838575, -0.013333589)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S2"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S2"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S7" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.735, 0, -1.9478457e-06, 0, 0.2, 0, 1.10981915e-07, 0, -12.9, 0.49, 2.241465, -0.013333589)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S7"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S7"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S3" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.935, 0, -2.2498375e-06, 0, 0.2, 0, 1.4118108e-07, 0, -14.9, 0.49, 19.233158, 57.11188)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S3"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S3"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S4" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.935, 0, -2.2498375e-06, 0, 0.2, 0, 1.4118108e-07, 0, -14.9, 0.49, 19.233158, -60.24104)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S4"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S4"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S6" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.935, 0, -2.2498375e-06, 0, 0.2, 0, 1.4118108e-07, 0, -14.9, -51.65938, 19.233158, 0.7319069)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S6"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S6"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall5_S5" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.935, 0, -2.2498375e-06, 0, 0.2, 0, 1.4118108e-07, 0, -14.9, 46.708595, 19.233158, -0.273098)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall5_S5"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall5_S5"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Wall7_W" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(1.19249e-08, 0, -1, 0, 1, 0, 1, 0, 1.19249e-08, -29.1458, 4, 0)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Wall7_W"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_wall_large")

[node name="Col" type="CollisionShape3D" parent="Architecture/Wall7_W"]
shape = SubResource("BoxShape3D_wall_large")

[node name="Corridor_NE_L" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 26, 4, -40)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_NE_L"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_NE_L"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_NE_R" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 40, 4, -26)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_NE_R"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_NE_R"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_SE_L" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, 40, 4, 26)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_SE_L"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_SE_L"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_SE_R" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, 26, 4, 40)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_SE_R"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_SE_R"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_SW_L" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, -26, 4, 40)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_SW_L"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_SW_L"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_SW_R" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, -40, 4, 26)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_SW_R"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_SW_R"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_NW_L" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, -40, 4, -26)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_NW_L"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_NW_L"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="Corridor_NW_R" type="StaticBody3D" parent="Architecture"]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, -26, 4, -40)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/Corridor_NW_R"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_corridor_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/Corridor_NW_R"]
shape = SubResource("BoxShape3D_corridor_wall")

[node name="SmallRoom_NE" type="Node3D" parent="Architecture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 55, 0, -55)

[node name="Back" type="StaticBody3D" parent="Architecture/SmallRoom_NE"]
transform = Transform3D(0.707, 0, -0.707, 0, 1, 0, 0.707, 0, 0.707, -6.997555, 4, 6.6455345)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NE/Back"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NE/Back"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side1" type="StaticBody3D" parent="Architecture/SmallRoom_NE"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.997555, 4, 3.6455345)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NE/Side1"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NE/Side1"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side2" type="StaticBody3D" parent="Architecture/SmallRoom_NE"]
transform = Transform3D(-4.37e-08, 0, 1, 0, 1, 0, -1, 0, -4.37e-08, -3.9975548, 4, 13.6455345)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NE/Side2"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NE/Side2"]
shape = SubResource("BoxShape3D_room_wall")

[node name="SmallRoom_SE" type="Node3D" parent="Architecture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 55, 0, 55)

[node name="Back" type="StaticBody3D" parent="Architecture/SmallRoom_SE"]
transform = Transform3D(0.707, 0, 0.707, 0, 1, 0, -0.707, 0, 0.707, -6.808178, 4, -6.24712)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SE/Back"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SE/Back"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side1" type="StaticBody3D" parent="Architecture/SmallRoom_SE"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.808178, 4, -3.24712)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SE/Side1"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SE/Side1"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side2" type="StaticBody3D" parent="Architecture/SmallRoom_SE"]
transform = Transform3D(-4.37e-08, 0, 1, 0, 1, 0, -1, 0, -4.37e-08, -3.808178, 4, -13.24712)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SE/Side2"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SE/Side2"]
shape = SubResource("BoxShape3D_room_wall")

[node name="SmallRoom_SW" type="Node3D" parent="Architecture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 0, 55)

[node name="Back" type="StaticBody3D" parent="Architecture/SmallRoom_SW"]
transform = Transform3D(0.707, 0, -0.707, 0, 1, 0, 0.707, 0, 0.707, 6.2932854, 4, -6.523201)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SW/Back"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SW/Back"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side1" type="StaticBody3D" parent="Architecture/SmallRoom_SW"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13.293285, 4, -3.523201)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SW/Side1"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SW/Side1"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side2" type="StaticBody3D" parent="Architecture/SmallRoom_SW"]
transform = Transform3D(-4.37e-08, 0, 1, 0, 1, 0, -1, 0, -4.37e-08, 3.2932854, 4, -13.523201)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_SW/Side2"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_SW/Side2"]
shape = SubResource("BoxShape3D_room_wall")

[node name="SmallRoom_NW" type="Node3D" parent="Architecture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 0, -55)

[node name="Back" type="StaticBody3D" parent="Architecture/SmallRoom_NW"]
transform = Transform3D(0.707, 0, 0.707, 0, 1, 0, -0.707, 0, 0.707, 7.0723953, 4, 6.985527)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NW/Back"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NW/Back"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side1" type="StaticBody3D" parent="Architecture/SmallRoom_NW"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.072395, 4, 3.985527)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NW/Side1"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NW/Side1"]
shape = SubResource("BoxShape3D_room_wall")

[node name="Side2" type="StaticBody3D" parent="Architecture/SmallRoom_NW"]
transform = Transform3D(-4.37e-08, 0, 1, 0, 1, 0, -1, 0, -4.37e-08, 4.0723953, 4, 13.985527)

[node name="Mesh" type="MeshInstance3D" parent="Architecture/SmallRoom_NW/Side2"]
material_override = SubResource("ShaderMaterial_wall")
mesh = SubResource("BoxMesh_room_wall")

[node name="Col" type="CollisionShape3D" parent="Architecture/SmallRoom_NW/Side2"]
shape = SubResource("BoxShape3D_room_wall")

[node name="PortalNW" parent="." instance=ExtResource("2_portal")]
transform = Transform3D(0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, -40.927605, 0, -41.014473)
target_map = "Dungeon0"
spawn_position = Vector3(0, 0, 2)
portal_color = Color(0.86, 0, 0.86, 1)

[node name="PortalNE" parent="." instance=ExtResource("2_portal")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 40.876713, 0, -41.354465)
target_map = "Arena0"
spawn_position = Vector3(0, 0, 2)
portal_color = Color(0.7, 0.33, 0.02, 1)

[node name="PortalSE" parent="." instance=ExtResource("2_portal")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 41.191822, 0, 41.75288)
target_map = "Arena1"
spawn_position = Vector3(0, 0, 2)
portal_color = Color(0, 0.8, 1, 1)

[node name="PortalSW" parent="." instance=ExtResource("2_portal")]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, -41.706715, 0, 41.4768)
target_map = "Arena2"
spawn_position = Vector3(-0.014011, 3.000208, -38.214027)
portal_color = Color(0, 1, 0, 1)
